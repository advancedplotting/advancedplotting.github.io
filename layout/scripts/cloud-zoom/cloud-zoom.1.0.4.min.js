//////////////////////////////////////////////////////////////////////////////////
// Cloud Zoom V1.0.4
// Rev 24th June 2013 16:28
// (c) 2010-2012 by R Cecco. <http://www.professorcloud.com>
// MIT License
//
// Please retain this copyright header in all versions of the software
//////////////////////////////////////////////////////////////////////////////////
(function($){function format(e){for(var t=1;t<arguments.length;t++){e=e.replace("%"+(t-1),arguments[t])}return e}function CloudZoom(e,t){var n=$("img",e);var r;var i;var s=null;var o=null;var u=null;var a=null;var f=null;var l;var c=0;var h,p;var d=0;var v=0;var m=0;var g=0;var y=0;var b,w;var E=this,S;setTimeout(function(){if(o===null){var t=e.width();e.parent().append(format('<div style="width:%0px; position:absolute; top:75%; left:%1px; text-align:center" class="cloud-zoom-loading">Loading...</div>',t/3,t/2-t/6));$("cloud-zoom-loading",e.parent()).css("opacity",.5)}},200);this.removeBits=function(){if(u){u.remove();u=null}if(a){a.remove();a=null}if(f){f.remove();f=null}$(".cloud-zoom-loading",e.parent()).remove()};this.destroy=function(){e.data("zoom",null);if(o){o.unbind();o.remove();o=null}if(s){s.remove();s=null}this.removeBits()};this.fadedOut=function(){if(s){s.remove();s=null}this.removeBits()};this.controlLoop=function(){if(u){var e=b-n.offset().left-h*.5>>0;var r=w-n.offset().top-p*.5>>0;if(e<0){e=0}else if(e>n.outerWidth()-h){e=n.outerWidth()-h}if(r<0){r=0}else if(r>n.outerHeight()-p){r=n.outerHeight()-p}u.css({left:e,top:r});u.css("background-position",-e+"px "+ -r+"px");d=e/n.outerWidth()*l.width>>0;v=r/n.outerHeight()*l.height>>0;g+=(d-g)/t.smoothMove;m+=(v-m)/t.smoothMove;s.css("background-position",-(g>>0)+"px "+(-(m>>0)+"px"))}c=setTimeout(function(){E.controlLoop()},30)};this.init2=function(e,t){y++;if(t===1){l=e}if(y===2){this.init()}};this.init=function(){$(".cloud-zoom-loading",e.parent()).remove();var r=$("<div class='mousetrap' style='background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"+"'></div>");o=e.parent().append(r).find(":last");o=$(".mousetrap",e.parent());o.css({width:n.outerWidth(),height:n.outerHeight(),top:0,left:0,position:"absolute",zIndex:9999});o.bind("mousemove",this,function(e){b=e.pageX;w=e.pageY});o.bind("mouseleave",this,function(e){clearTimeout(c);if(u){u.fadeOut(299)}if(a){a.fadeOut(299)}if(f){f.fadeOut(299)}s.fadeOut(300,function(){E.fadedOut()});return false});o.bind("mouseenter",this,function(r){b=r.pageX;w=r.pageY;S=r.data;if(s){s.stop(true,false);s.remove()}var i=t.adjustX,c=t.adjustY;var d=n.outerWidth();var v=n.outerHeight();var m=t.zoomWidth;var g=t.zoomHeight;if(t.zoomWidth=="auto"){m=d}if(t.zoomHeight=="auto"){g=v}var y=e.parent();switch(t.position){case"top":c-=g;break;case"right":i+=d;break;case"bottom":c+=v;break;case"left":i-=m;break;case"inside":m=d;g=v;break;default:y=$("#"+t.position);if(!y.length){y=e;i+=d;c+=v}else{m=y.innerWidth();g=y.innerHeight()}}s=y.append(format('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none; position:absolute; left:%0px; top:%1px; width:%2px; height:%3px; background-image:url(\'%4\'); z-index:99;"></div>',i,c,m,g,l.src)).find(":last");s=$(".cloud-zoom-big",y);if(n.attr("title")&&t.showTitle){s.append(format('<div class="cloud-zoom-title">%0</div>',n.attr("title")));$(".cloud-zoom-title",s).css("opacity",t.titleOpacity)}s.fadeIn(500);if(u){u.remove();u=null}h=n.outerWidth()/l.width*s.width();p=n.outerHeight()/l.height*s.height();u=e.append(format("<div class='cloud-zoom-lens' style='display:none; z-index:98; position:absolute; width:%0px; height:%1px;'></div>",h,p)).find(":last");u=$(".cloud-zoom-lens",e);o.css("cursor",u.css("cursor"));var E=false;if(t.tint){u.css("background",'url("'+n.attr("src")+'")');a=e.append(format('<div class="cloud-zoom-tint" style="display:none; position:absolute; left:0; top:0; width:%0px; height:%1px; background-color:%2;" />',n.outerWidth(),n.outerHeight(),t.tint)).find(":last");a=$(".cloud-zoom-tint",e);a.css("opacity",t.tintOpacity);E=true;a.fadeIn(500)}if(t.softFocus){u.css("background",'url("'+n.attr("src")+'")');e.append(format('<div class="cloud-zoom-soft" style="position:absolute; display:none; top:2px; left:2px; width:%0px; height:%1px;" />',n.outerWidth()-2,n.outerHeight()-2,t.tint));f=$(".cloud-zoom-soft",e);f.css("background",'url("'+n.attr("src")+'")');f.css("opacity",.5);E=true;f.fadeIn(500)}if(!E){u.css("opacity",t.lensOpacity)}if(t.position!=="inside"){u.fadeIn(500)}S.controlLoop();return})};r=new Image;$(r).load(function(){E.init2(this,0)});r.src=n.attr("src");i=new Image;$(i).load(function(){E.init2(this,1)});i.src=e.attr("href")}var scripts=document.getElementsByTagName("script");var last=scripts[scripts.length-1].src.lastIndexOf("/");var scriptPath=scripts[scripts.length-1].src.slice(0,last);$(document).ready(function(){$(".cloud-zoom, .cloud-zoom-gallery").CloudZoom()});$.fn.CloudZoom=function(options){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}this.each(function(){var dataOpts,opts;eval("var a = {"+$(this).attr("data-cloudzoom")+"}");dataOpts=a;if($(this).is(".cloud-zoom")){$(this).css({position:"relative",display:"inline-block"});$("img",$(this)).css({display:"block"});if($(this).parent().attr("id")!="cloud-zoom-wrap"){$(this).wrap('<div id="cloud-zoom-wrap" style="top:0; z-index:9999; position:relative;"></div>')}opts=$.extend({},$.fn.CloudZoom.defaults,options);opts=$.extend({},opts,dataOpts);$(this).data("zoom",new CloudZoom($(this),opts))}else if($(this).is(".cloud-zoom-gallery")){opts=$.extend({},dataOpts,options);$(this).data("dataOpts",opts);$(this).bind("click",$(this),function(e){var t=e.data.data("dataOpts");$("#"+t.useZoom).data("zoom").destroy();$("#"+t.useZoom).attr("href",e.data.attr("href"));$("#"+t.useZoom+" img").attr("src",e.data.data("dataOpts").mediumImage);$("#"+e.data.data("dataOpts").useZoom).CloudZoom();return false})}});return this};$.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:false,tintOpacity:.5,lensOpacity:.5,softFocus:false,smoothMove:3,showTitle:false,titleOpacity:.5,adjustX:0,adjustY:0}})(jQuery)